# Глава 9. Динамическое программирование

## Задача о рюкзаке

**Условие**

У вас есть рюкзак, в котором можно унести товары общим весом до 4 фунтов.

Есть три предмета, которые можно уложить в рюкзак:

Предмет|Цена|Вес
-|-|-
Магнитофон|3000|4
Ноутбук|2000|3
Гитара|1500|1

Какие предметы следует положить в рюкзак, чтобы стоимость добычи была максимальной?

**Простое решение**

Перебор всех возможных множеств предметов - O(2<sup>n</sup>).

**Приближенное решение**

Неоптимальное решение с помощью жадного алгоритма (берем самое дорогое, что влезает).

**Оптимальное решение**

Динамическое программирование.

## Динамическое программирование

> Процедура начинается с решения подзадач с по­ степенным переходом к решению полной задачи.
>
> В задаче о рюкзаке начать следует с реше­ния задачи для меньшего рюкзака (или подрюкзака), а потом на этой основе попытаться решить исходную задачу.

Начинаем с таблицы, в которой каждый предмет представлен отдельной строкой. В качестве столбцов - размеры "подрюкзаков" в фунтах.

Фунты|1|2|3|4
-|-|-|-|-
Гитара||||
Магнитофон||||
Ноутбук||||

[Заполнение таблицы и зачем это нужно](./fill-table.md)

Для заполнения каждой ячейки существует формула:

```
cell[row][col] = max(
  //предыдущий max
  cell[row - 1][col],

  // стоимость текущего элемента
  // + стоимость оставшегося пространства
  cell[row - 1][col - вес предмета]
)
```

## Оптимизация туристического маршрута

**Условие**

Представьте, что вы приехали в Лондон на выходные. У вас два дня, а мест, которые хочется посетить, слишком много. Побывать везде не получится, поэтому вы составляете список.

Достопримечательность|Время|Оценка
-|-|-
Вестминстерское аббатство|0.5 дня|7
Театр Глобус|0.5 дня|6
Национальная галерея|1 день|9
Британский музей|2 дня|9
Собор святого Павла|0.5 дня|8

[Заполнение таблицы](./route-table.md)

* Динамическое программирование применяется для оптимизации какой-либо характеристики при заданных ограничениях. В задаче о рюкзаке требуется максимизи­ ровать стоимость отобранных предметов с ограничениями по емкости рюкзака.
* Динамическое программирование работает только в ситуациях, в кото­рых задача может быть разбита на автономные подзадачи, не зависящие друг от друга.